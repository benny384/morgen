import java.util.ArrayList;

public class Rennen {
    private String name;
    private int anzahlTeilnehmer;
    private ArrayList<Rennschnecke> teilnehmendeSchnecken;
    private double rennstreckeLaenge;
    
    public Rennen(String name, int anzahlTeilnehmer, double rennstreckeLaenge) {
        this.name = name;
        this.anzahlTeilnehmer = anzahlTeilnehmer;
        this.teilnehmendeSchnecken = new ArrayList<Rennschnecke>();
        this.rennstreckeLaenge = rennstreckeLaenge;
    }
    
    public void addRennschnecke(Rennschnecke neueSchnecke) {
        if (teilnehmendeSchnecken.size() < anzahlTeilnehmer) {
            teilnehmendeSchnecken.add(neueSchnecke);
        }
    }
    
    public void removeRennschnecke(String name) {
        for (int i = 0; i < teilnehmendeSchnecken.size(); i++) {
            if (teilnehmendeSchnecken.get(i).getName().equals(name)) {
                teilnehmendeSchnecken.remove(i);
                return;
            }
        }
    }
    
    public String toString() {
        String result = name + "\n" + "Anzahl Teilnehmer: " + anzahlTeilnehmer + "\n" + "Teilnehmende Schnecken:\n";
        for (Rennschnecke schnecke : teilnehmendeSchnecken) {
            result += schnecke.toString() + "\n";
        }
        result += "Rennstrecke LÃ¤nge: " + rennstreckeLaenge + "\n";
        return result;
    }
    
    public Rennschnecke ermittleGewinner() {
        Rennschnecke gewinner = null;
        for (Rennschnecke schnecke : teilnehmendeSchnecken) {
            if (schnecke.getStreckeZurueckgelegt() >= rennstreckeLaenge) {
                if (gewinner == null) {
                    gewinner = schnecke;
                } else if (schnecke.getStreckeZurueckgelegt() > gewinner.getStreckeZurueckgelegt()) {
                    gewinner = schnecke;
                }
            }
        }
        return gewinner;
    }
    
    public void lasseSchneckenKriechen() {
        for (Rennschnecke schnecke : teilnehmendeSchnecken) {
            schnecke.krieche();
        }
    }
    
    public void durchfuehren() {
        Rennschnecke gewinner = null;
        while (gewinner == null) {
            lasseSchneckenKriechen();
            gewinner = ermittleGewinner();
        }
        System.out.println("Der Gewinner ist: " + gewinner.getName());
    }
}
